= Workflow: Convert an Exising Mule Project to an APIkit Project

If you create a new Studio project without specifying a RAML file, and you check the Add API Components checkbox, APIkit generates a skeletal RAML file and XML configuration that includes the following things:

* HTTP Listener configuration
* APIkit Router component
* Error handling flows

After adding the RAML content, you can use API Console to simulate the API.

== Adding APIkit to an Existing Design

You add APIkit components to an existing design, for example a legacy project that you want to modernize using RAML and APIkit, by creating the RAML code within Studio as follows:

*RAML-based API*

* Define the RAML.
* Create a main flow, or use an existing one, that includes an HTTP Listener and APIkit Router.
* Generate backend flows.
* Add a reference to error handling in the main flow.
* Add an apikit:console component.

The generated backend flows contain the core logic of the API, the REST resource-action pairing.

== Creating a Main Flow

Within the APIkit project, build a flow. Drag the following components from the Mule palette:

* An HTTP Listener
* An APIkit Router


== Generating REST Backend Flows

When you create a RAML in Studio, generating backend flows is optional. Error handling is generated for a RAML-based API. You need to reference generated flows from the main flow. This procedure assumes you have already created a main flow.

To generate backend flows: 

. In the Package Explorer, right-click the project name.
. Select Mule > Generate Flows from RAML.
+
The backend flows appear below the main flow.

== Mapping RAML Resources to Actions

As part of the backend-first design process, you map RAML resources to actions as shown in the following procedure. This procedure assumes you have generated backend flows.

To map resources to actions:

. Click the APIkit Router to open the *Properties Editor*. In *Router configuration*, click image:Add-16x16.png[].
+
The *Global Element Properties* wizard appears.
+
. Browse to the RAML file you created within Studio.
. In Mappings, click image:Add-16x16.png[] to create a new mapping.
+
The *New Mapping* dialog appears.
. Use the drop-down to map the resources to actions.
+
* In the Resource drop-down, select `/sales`.
+
* In the Action drop-down, select `Post`.
+
* In the Flow drop-down, select the flow that contains the post action.
+
Click *OK*.
+
image::apikit-using-ab251.png[apikit-using-ab251]
+
. Repeat the previous step for each resource-action pairing in the API.