= Configuring Graphs in a Custom Dashboard

In Anypoint Monitoring, a graph is part of a custom dashboard where you can ... TODO

== Adding a Graph to a Dashboard

* Title
* Description

== Add Series: Basic Mode

* Metric
* Environment
* Resource

== Add Series: Advanced Mode

TODO: You can add one or more queries.

* From
* Where
* Select
* Group By
* Alias By

=== Draw Modes

TODO

* Bars
* Lines
* Points

=== Mode Options

TODO

* Fill
* Line Width
* Staircase

=== Hide Series

TODO

* With Nulls Only
* With Only Zeros

== Configuring a Graph

Clicking the title for a panel exposes a menu. The edit option opens additional configuration options for the panel.

Click to open color & axis selection.

Click to only show this series. Shift/Ctrl + click to hide series.

== Axes

*TODO*

The Axes tab controls the display of axes, grids and legend. You can have a vertical

Vertical Right Y or Left Y Axis Settings:

* Show: If unchecked, hides the Y axis from the graph.
* Unit: The display unit for the Y value.  Values include `none`, `currency` (including `Dollars $` or `Real ($)`), `time`, `data`, `data rate` and many others.
* Scale:
  | linear
  | log (base 2)
  | log (base 10)
  | log (base 32)
  | log (base 1024)
* Y-Min: The minimum Y value. Defaults to `auto`.
* Y-Max: The maximum Y value. Defaults to `auto`.
* Decimals: *TODO* Defaults to `auto`.
* Label | Label for the Y axis. Defaults to `""`.

=== X-Axis Settings

* Show: If unchecked, hides the X axis from the graph.
* Mode
  | Time
  | Series: Data is grouped by series, rather than time. The y-axis represents the value.
    | Value (if Series is selected)
  | Histogram: Converts the graph into a bar chart that groups numbers into ranges (called buckets in the UI). The higher the bar, the more data in that range.
    | Buckets (if Histogram is selected): Ranges

  // Histograms and buckets are described in more detail here.


*TODO:*

There are three options:

The default option is Time and means the x-axis represents time and that the data is grouped by time (for example, by hour or by minute).

The Series option means that the data is grouped by series and not by time. The y-axis still represents the value.

== Visuals

//TODO

image::example-graph-config-visuals.png[Example: Singlestat Visuals]

== Alerts

*TODO: prob will move alerts config here instead*

See link:alerts-app-config[Configuring Alerts]

== Advanced

* Link
* Legend
* Stacking and Hover
* Threshold: A line or section you can add to a graph to see when a particular threshold (or limit) is crossed.

* Time Range Shift
  | Override Relative Time:  *TODO* Last period of time (for example, `1h`).
  | Add Time Shift: *TODO*
  | Hide Time Override Info: *TODO*

=== Advanced Option: Links

Graphs can contain links that ... *TODO*

image::graph-advanced-link.png[Advanced Graph Settings: Link]

=== Advanced Option: Stacking and Hover

image::graph-advanced-stack-hover.png[Advanced Graph Settings: Stack and Hover]

Hover Tooltip: Displays data for a time point in a graph when you hover over that data.

.Hover Tooltip
|===
| Mode | For displaying one or all series in the tooltip.
| Sort Order | Displays data in no order (None), Decreasing or Increasing order. Defaults to None.
| Stacked Value  a|
Available when Stack is checked. Controls the display of values in the tooltip:

* Individual: The value for the series you hover over.
* Cumulative: *TODO* Sum of series below plus the series you hover over.
|===

Stacking and Null: You can display multiple series as a group within a stack. You can also specify how to deal with null values.

.Stacking and Null
|===
| Stack | When checked, stacks each series, one on top of another.
| Percent | Available when Stack is checked. Displays each series in the stack as its percentage of the total.
| Null Value | Determines how to display null values: Connected, Null, Null As Zero
|===



Stacked value -

=== Advanced Option: Legend

Graphs can contain legends.

image::graph-advanced-legend.png[Advanced Graph Settings: Legend]

.Options
|===
| Show  | Unchecking hide the legend. Checked by default.
| Table | Checking displays the legend in a table. Unchecked by default.
| To The Right | Checking display the legend to the right side. Unchecked by default.
| Width | Available when To The Right is checked. Sets the minimum width for the legend. Defaults to `0`.
|===

//TODO: WIDTH IN WHAT? PIXELS?

You can also display these values can be shown beside the legend names:

.Values
|===
| Min | Minimum of all values returned from the query.
| Max | Maximum of all values returned from the query.
| Avg | Average of all values returned from the query.
| Current | Last value returned from the query
| Total | Sum of all values returned from metric query
| Decimals | Overrides automatic decimal precision for legends and tooltips.
|===

After you complete your configuration, you can click Save Changes or exit the configuration without saving and return to the dashboard by clicking the `X`.

////
DONT USE:
Additional values can be shown alongside the legend names.
Note that legend values are calculated client side by Grafana
and depend on what type of aggregation or point consolidation
your metric query is using. All the above legend values cannot
be correct at the same time. For example if you plot a rate
like requests/second, this is probably using average as
aggregator, then the Total in the legend will not represent
the total number of requests. It is just the sum of all
data points received by Grafana.
////

////
Hide series
Hide series when all values of a series from a metric query are of a specific value:

With only nulls | Value=null (default unchecked)
With only zeros | Value=zero (default unchecked)


The general tab allows customization of a panel’s appearance and menu options.

General Options
Title | The panel title on the dashboard
Span | The panel width in columns
Height | The panel contents height in pixels
Drilldown / detail link
The drilldown section allows adding dynamic links to the panel that can link to other dashboards or URLs.

Each link has a title, a type and params. A link can be either a dashboard or absolute links. If it is a dashboard link, the dashboard value must be the name of a dashboard. If it is an absolute link, the URL is the URL to the link.

params allows adding additional URL params to the links. The format is the name=value with multiple params separated by &. Template variables can be added as values using $myvar.

When linking to another dashboard that uses template variables, you can use var-myvar=value to populate the template variable to a desired value from the link.

Metrics
The metrics tab defines what series data and sources to render. Each datasource provides different options.







Time Range
The time range tab allows you to override the dashboard time range and specify a panel specific time. Either through a relative from now time option or through a timeshift.

Legend
The legend hand be hidden by checking the Show checkbox. If it’s shown, it can be displayed as a table of values by checking the Table checkbox. Series with no values can be hidden from the legend using the Hide empty checkbox.

Legend Values
Additional values can be shown along-side the legend names:

Total | Sum of all values returned from metric query
Current | Last value returned from the metric query
Min | Minimum of all values returned from metric query
Max | Maximum of all values returned from the metric query
Avg | Average of all values returned from metric query
Decimals | Controls how many decimals are displayed for legend values (and graph hover tooltips)
The legend values are calculated client side by Grafana and depend on what type of aggregation or point consolidation your metric query is using. All the above legend values cannot be correct at the same time. For example if you plot a rate like requests/second, this is probably using average as aggregator, then the Total in the legend will not represent the total number of requests. It is just the sum of all data points received by Grafana.

Display styles


Display styles control visual properties of the graph.



Chart Options
Bar | Display values as a bar chart
Lines | Display values as a line graph
Points | Display points for values
Line Options
Line Fill | Amount of color fill for a series. 0 is none.
Line Width | The width of the line for a series.
Null point mode | How null values are displayed
Staircase line | Draws adjacent points as staircase
Multiple Series
If there are multiple series, they can be displayed as a group.

Stack | Each series is stacked on top of another
Percent | Each series is drawn as a percentage of the total of all series
If you have stack enabled, you can select what the mouse hover feature should show.

Cumulative | Sum of series below plus the series you hover over
Individual | Just the value for the series you hover over
Rendering
Flot | Render the graphs in the browser using Flot (default)
Graphite PNG | Render the graph on the server using graphite’s render API.
Tooltip
All series | Show all series on the same tooltip and a x crosshairs to help follow all series
Series Specific Overrides
The section allows a series to be rendered differently from the others. For example, one series can be given a thicker line width to make it stand out.

Dashes Drawing Style
There is an option under Series overrides to draw lines as dashes. Set Dashes to the value True to override the line draw setting for a specific series.
////
