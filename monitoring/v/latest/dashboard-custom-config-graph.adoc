= Configuring Graphs in a Custom Dashboard

In Anypoint Monitoring, you can configure one or more sets of time-series data. Time-series data simply measures how something changes over time. A graph in a custom dashboard can display a metric for a resource in a given environment.

To configure a graph, you might select a response time or heap usage as the metric to graph for a Mule app in your Design or Sandbox environment. Advanced configuration options allow for more fine-tuned data sets. You can also customize the X and Y axes, the look of the graph, legends, the behavior when you hover over a data point, and more. These options are described in more detail below.

To open a configuration page for a graph, see link:dashboard-custom-config[Configuring Custom Dashboards].

//GENERAL SETTINGS shared by singlestat and graph
//== General
include::include-general-config.adoc[]
// END GENERAL

== Axes

You can configure the x-axis and y-axis of your graph.

=== Y-Axis Settings

You can set a vertical y-axis for the left (Left Y) or right (Right Y) side of your graph.

[cols="1,4"]
|===
| Show | If unchecked, hides the y-axis from the graph.
| Unit | The unit of measurement to use for values on the y-axis.  Values include `none`, data types (such as `short`, `percent (1-100)`), `currency` settings (including `Dollars $` or `Real ($)`), `time`, `data`, `data rate`, and many other types of values.
| Scale a|

Valid values for a linear or logarithmic (log) scale:

* linear
* log (base 2)
* log (base 10)
* log (base 32)
* log (base 1024)
| Y-Min | The minimum value for the Y-axis. Defaults to `auto`.
| Y-Max | The maximum value for the Y-axis. Defaults to `auto`.
| Decimals | Override for the automatic decimal precision on the y-axis, for example, where `2` limits a value of `10.12345` to `10.12`. Defaults to `auto`.
| Label | A string used to label the Y axis. Defaults to `""`.
|===

=== X-Axis Settings

[cols="1,4"]
|===
| Show | If unchecked, hides the x-axis from the graph.
| Mode a|

Valid values:

* Time: The default option. Indicates that x-axis data is divided into time units (for example, hours or minutes).
* Series: Indicates that data divided by series, and the y-axis provides the value of the series data.
* Histogram: Converts the graph into a bar chart that represents collections of data at a specified, numeric intervals (called a buckets or bins), for example, . The higher a bar in a histogram, the greater the frequency (or count) of data collected at that interval.
| Value | Visible only if Series is selected. *TODO: NEED DESCRIPTION*
| Buckets | Visible only if Histogram is selected. *TODO: NEED DESCRIPTION*
|===

After you complete your configuration, you can click Save Changes. To exit the configuration and return to the dashboard, simply click the `X`.

== Visuals

You can configure the style and look of graph to use. Bar, line, and point graphs are supported.

image::graph-config-visuals.png[Example: Singlestat Visuals]

[cols="1,4"]
|===

| Draw Modes a|

You can check one or more of these modes:

* Bars: Checkbox for representing values as bar charts.
* Lines: Checkbox for representing values as line graphs.
* Points: Checkbox for representing values as data points.
| Mode Options a|

Only available when the selected Draw Modes are Lines or Points.

* Point Radius: Only available when Lines is a selected Draw Mode. On a scale of `0` (none) to `10`, sets the thickness of the line that connects related data points on the graph.
* Fill: Only available when Points is a selected Draw Mode. On a scale of `0` (none) to `10`, sets the opacity of the color used below related data points on the graph.
* Line Width: Only available when Points is a selected Draw Mode. On a scale of `0` (none) to `10`, sets the thickness of the border of the fill.
* Staircase: Checkbox for displaying adjacent points in a staircase pattern.
| Hide Series a|

* With Nulls Only: Checkbox for hiding any series that is filled with null values.
* With Only Zeros: Checkbox for hiding any series that is filled with values of zero.
|===

After you complete your configuration, you can click Save Changes. To exit the configuration and return to the dashboard, simply click the `X`.

//ALERTS CONFIG HERE, included via include-alerts.adoc
//== Alerts
include::include-alerts-config.adoc[]

//END ALERTS

== Advanced

You can add and configure links, legends, thresholds, and other features for your graph.

=== Links

You can configure links that appear in the dropdown menu in a for a graph in a custom dashboard, for example:

.Example: Link in a Custom Dashboard
image::dashboard-custom-link.png[Link in a Custom Dashboard]

.Link Settings
[cols="1,4"]
|===
| Link a|

Valid values:

* Type: Valid values are `dashboard` and `absolute`.
* Dashboard:
* Title:
* URL Params:
* Include Time Range
* Include Variables
* Open in New Tab
* Remove Link: Button for removing the link.
|===

=== Legends

Graphs can contain legends.

image::graph-advanced-legend.png[Advanced Graph Settings: Legend]

.Legend Option Settings
[cols="1,4"]
|===
| Show  | Unchecking hide the legend. Checked by default.
| As Table | Checking displays the legend in a table. Unchecked by default.
| To the Right | Checking display the legend to the right side. Unchecked by default.
| Width | Available when To the Right is checked. Sets the minimum width for the legend. Defaults to `0`. *TODO: UNIT OF MEASURE*
|===

You can also display these values can be shown beside the legend names:

.Legend Values
[cols="1,4"]
|===
| Min | Minimum of all values returned from the query.
| Max | Maximum of all values returned from the query.
| Avg | Average of all values returned from the query.
| Current | Last value returned from the query
| Total | Sum of all values returned from metric query
| Decimals | Overrides automatic decimal precision for legends and tooltips.
|===

After you complete your configuration, you can click Save Changes. To exit the configuration and return to the dashboard, simply click the `X`.

=== Stacking and Hover

*TODO*

image::graph-advanced-stack-hover.png[Advanced Graph Settings: Stack and Hover]

A hover tooltip displays data for a time point in a graph when you hover over that data.

.Hover Tooltip
[cols="1,4"]
|===
| Mode | For displaying one or all series in the tooltip.
| Sort Order | Displays data in no order (None), Decreasing or Increasing order. Defaults to None.
| Stacked Value  a|
Available when Stack is checked. Controls the display of values in the tooltip:

Valid values:

* Individual: The value for the series you hover over.
* Cumulative: *TODO* Sum of series below plus the series you hover over.
|===

Stacking and Null functionality allows you to display multiple series as a group within a stack. You can also specify how to deal with null values.

.Stacking and Null
|===
| Stack | When checked, stacks each series, one on top of another.
| Percent | Available when Stack is checked. Displays each series in the stack as its percentage of the total.
| Null Value | Determines how to display null values: Connected, Null, Null As Zero
|===

=== Threshold

You can add a line or section to a graph to see when a particular threshold (or limit) is crossed.

*TODO*

=== Time Range Shift

Time ranges are calculated backwards from the present time. For example, you might set the time range so you can view the last 2 hours of data in a graph. You can also shift the time range to calculate backwards from an earlier point in time, for example, from 1 hour ago instead of from the present time.

|===
| Override Relative Time | The amount of time to show in the x-axis of the graph (for example, `2h`). Information about this setting is displayed under the title of the graph unless you select Hide Time Override Info.
| Add Time Shift | Amount of time before now (the current time) to _end_ (or shift back in time) the duration set by Override Relative Time. For example, if the time right now is 10:00, and you shift the time to `1h` when the Override Relative Time is `2h`, end users will see the two hours of data available from 7:00 to 9:00, and the table will also display a message like this: `2 hours, ending 1 hour ago`.
| Hide Time Override Info | Checkbox for hiding the description  of any Override Relative Time and Time Shift settings from the graph.
|===

After you complete your configuration, you can click Save Changes. To exit the configuration and return to the dashboard, simply click the `X`.
