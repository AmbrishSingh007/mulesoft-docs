= Configuring Singlestat Charts in a Custom Dashboard

Custom dashboards in Anypoint Monitoring provide a way for you to configure singlestat charts for a single measure, such as a response time or heap usage, of your Mule app environment over a given time range.

== General Settings

The General settings for Singlestat include basic and advanced configuration options. Both types of settings share fields for the title and a short description of the singlestat.

.Shared Singlestat Settings
[cols="1,4"]
|===
| Title | Title for the singlestat to display in the UI.
| Description | Short description of the singlestat to display in the UI when users hover over the information (`i`) icon.
| Data Source | *TODO: VERIFY, get more info on this. Could use a tooltip.* The database that stores series data for your dashboard. |
|===

=== Basic Singlestat Settings

The basic settings support the display of a single metric for given resource in an environment.

.Example: Basic Singlestat Configuration

image::singlestat-config.png[Example: Basic Singlestat Configuration]

The table provides descriptions of basic singlestat settings.

.Basic Singlestat Settings
[cols="1,4"]
|===
| Metric a|
*TODO: NEED DESCRIPTIONS*

* CPU
* Heap Usage
* Response Time By App
* Response Time By Inbound Endpoint
* Response Time By Outbound Endpoint
* Messages Processed
| Environment | Your Mule app environments.
| Resource | The Mule app.
|===

After you complete your configuration, you can either click Save Changes or exit the configuration _without saving_ and return to the dashboard by clicking the `X`.

=== Advanced Singlestat Settings

Advanced settings support one or more fine-tuned queries for your singlestat chart.

It is important to note that an advanced configuration will be partially removed if you switch back to the basic configuration area.

.Example: Advanced Singlestat Configuration
image::singlestat-config-advanced.png[Example: Advanced Singlestat Configuration]

*TODO: NEED DESCRIPTIONS OF MANY OF THESE SETTINGS*

The table provides descriptions of advanced singlestat settings.

.Advanced Singlestat Settings
[cols="1,4"]
|===
| From |  Provides an extensive list of measurable JVM and application properties (such as `jvm.memory` and `app_inbound_metric`) associated with the data source.
| Where | Supports conditional logic using one or more filters tags (such as `app_id`, `env_id`, `org_id`, `worker_id`) to apply to the From data source. Example: `Where env_id = Sandbox`. Available operators include `=`, `!=`, `<>`, `<`, and `>`. You can construct a multi-filter query using a logical `AND` or `OR`
| Select | For creating a function that selects a field (such as `heap_committed`,`heap_total`, or `heap_used`) from a From property (such as `jvm.memory`) and applies an operation to it (such as the `mean` of the `heap_total`). You can add one or more `field` settings.
| Group By | For grouping the data by a selected time interval (such as `$__interval`, `1s`, `10m`, `1h`), filter tag (such as `tag(env_id)`), and fill options (such as `none`, `null`, `0`, `previous`, `linear`). In addition to filter tags, you can also choose `LIMIT`, `SLIMIT`, `ORDER BY time DESC`. *TODO: DESCRIPTIONS NEEDED*
| Alias By | *TODO: VALID VALUES NEEDED, explain supported variables, too. MK's notes say "Series Name"*  Example: `$tag_worker_id`
|===

After you complete your configuration, you can either click Save Changes or exit the configuration _without saving_ and return to the dashboard by clicking the `X`.

== Time Range

Time range configurations provide a way to override _relative_ time ranges (such as the last 30 minutes) selected from the dashboard UI by end users of a singlestat.

image::singlestat-config-time-range.png[Example Singlestat Time Range]

[cols="1,4"]
|===
|Override Relative Time | The amount of time covered by the statistic, for example, the last hour (`1h`) or last thirty minutes (`30m`). Note that this setting only overrides _relative_ time ranges selected by end users from the dashboard UI. When these users select an _absolute time and date range_ for the dashboard, the configuration for the singlestat time range override will be disabled.
| Add Time Shift | How long ago the covered time period ended, for example, `1s` for one second ago.
| Hide Time Override Info | Indicates whether the singlestat will display information about its settings, such as `30 minutes, ending 1 second ago`.
|===

After you complete your configuration, you can either click Save Changes or exit the configuration _without saving_ and return to the dashboard by clicking the `X`.

== Options

//TODO

image::singlestat-config-options.png[Example: Singlestat Options]

== Value Mappings

You can configure these settings to describe a summary statistic.

|===
| Value to Text | Maps a number to a textual description, for example: `0` -> `Error`, `1` -> `Success`
| Range to Text | Maps a numeric range to a textual description, for example: From `5` To `10` Text `Warning`
|===

.Example: Range to Text
image::singlestat-config-value-mapping.png[Example: Value Mapping]

After you complete your configuration, you can either click Save Changes or exit the configuration _without saving_ and return to the dashboard by clicking the `X`.
