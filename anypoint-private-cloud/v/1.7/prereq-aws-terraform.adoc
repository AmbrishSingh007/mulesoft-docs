= To Create Anypoint Private Cloud Resources on Amazon Web Services (AWS)

This topic describes how to create the resources required to install Anypoint Platform Private Cloud Edition on Amazon Web Services (AWS).

== Prerequisites

To install Anypoint Platform Private Cloud Edition on AWS, you must have an AWS account with the following:

* Your account must provide a keypair with EC2FullAccess.
* You must create the following resources in your account:
+
[%header%autowidth.spread]
|===
| AWS Resource | Number required
| m4.2xlarge | 3
| root disk @ 500 | 3
| EBS volumes @ 1500 iops | 6
| EBS volume @ 3000 iops | 6
| Amazon ELB | 1
| t2.micro | 1
|===

== Creating Amazon Resources

. Ensure that you have an AWS account that contains the prerequisites mentioned above.
. Download the Anypoint Platform Private Cloud Edition terraform script from the following URL:
+
----
URL TBD
----
+
[WARNING]
Do not modify the Terraform script provided. Anypoint Platform Private Cloud Edition does not support modifying or customing the Terraform script.

. Extract the downloaded archive.
. Install Terraform into the folder you extracted previously.
. Set the following environment variables on your system:
+
[%header%autowidth.spread]
|===
| Property | Description
| ROLE_TAG_VALUE | (Optional) Specifies a label for the assets terraform creates. If you do not supply a value, Terraform uses `anypoint-platform` by default
| CLUSTER_NAME | Specifies the name of the cluster in AWS.
| AWS_ACCESS_KEY_ID | Specifies the AWS access ID Terraform uses to connect to your AWS account. You can obtain this value from the AWS console.
| AWS_SECRET_ACCESS_KEY  | Specifies the AWS access key Terraform uses to connect to your AWS account. You can obtain this value from the AWS console.
| REGION | Specifice the AWS region where Terraform creates the cluster. Note that Gov Cloud is not supported.
| NODES | Specifies the number of nodes that Terraform creates. Valid values are: `1`, `2`, `3`
| KEY_PAIR | Specifies the AWS key pair that Terraform uses when creating the cluster.
|===
+
These environment variables define the credentials and URL required for Terraform to connect to your AWS environment.

. From the archive folder run the following command:
+
----
make create-cluster
----
+
This script displays the terraform plan that outlines all of the resources to be created in your AWS environment.

. Confirm the terraform plan.
+
After confirmation, Terraform creates the required resources within your AWS account.

. Login to the AWS console to determine the IP address of the bastion.
+
You must use this IP address to connect to the bastion to install Anypoint Platform Private Cloud Edition.

== See Also

* https://www.terraform.io/intro/getting-started/install.html[Install Terraform]
* https://docs.aws.amazon.com/quickstart/latest/linux-bastion/welcome.html[Linux Bastion Hosts on the AWS Cloud: Quick Start Reference Deployment]