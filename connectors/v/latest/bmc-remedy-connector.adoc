= BMC Remedy Connector
:keywords: anypoint studio, connector, remedy
:imagesdir: ./_images

_Select_

The Anypoint BMC Remedy AR System Connector is built with the BMC Remedy AR System Java API v8.1 and is compatible with BMC Remedy AR System 7.x and later. This connector exposes methods for performing CRUD operations on the BMC Remedy AR System.

The BMC Remedy Connector functions within a Mule application as a secure entry point for access and updates to your organization's information in the BMC Remedy AR System.

Your application can perform several operations that BMC Remedy AR System exposes via RPC when building an application that connects with the BMC Remedy AR System.

== Prerequisites

This document assumes that you are familiar with the BMC Remedy API, Mule, Anypoint Connectors, Anypoint Studio, Mule concepts, elements in a Mule flow, and Global Elements.

To use the BMC Remedy connector, you need:

* BMC Remedy AR System - A BMC Remedy AR server instance v7.x or later. The connector has been tested against a BMC Remedy AR server v9.1 instance. See the BMC Remedy Installation instructions listed in the See Also section of this document.
* BMC Remedy AR System Java API v8.1 (the link is listed in the See Also section of this document).

== What's New in this Connector

Support for Mule 4.

== To Connect in Design Center

The BMC Remedy connector does not support use in Design Center.

== Connect in Anypoint Studio 7

You can use this connector in Anypoint Studio by first downloading it from Exchange and configuring it as needed.

=== Install Connector in Studio

. In Anypoint Studio, click the Exchange icon in the Studio taskbar.
. Click Login in Anypoint Exchange.
. Search for this connector and click Install.
. Follow the prompts to install this connector.

When Studio has an update, a message displays in the lower right corner,
which you can click to install the update.

=== Configure in Studio

You need to put the dependency in your file pom.xml.

[source,xml,linenums]
----
<dependency>
  <groupId>org.mule.connectors</groupId>
  <artifactId>mule-remedy-connector</artifactId>
  <version>3.0.0</version>
  <classifier>mule-plugin</classifier>
</dependency>
----

. Click the Global Elements tab at the base of the canvas.
. On the Global Mule Configuration Elements screen, click Create.
. In the Choose Global Type wizard, expand the Connector Configuration, select Remedy Configuration, and click Ok.
+
image:bmc-remedy-global-configuration.png[Global Element Configuration Wizard]
+
. Configure the parameters according to instructions below.
+
[%header%autowidth.spread]
|===
|Parameter |Description
|Name |Enter a name for the configuration to reference it.
|Username |Enter the Username.
|Password |Enter the Password.
|Server |Enter the IP of the AR server responsible for handling login requests
|Server Port | Enter the port number on which the AR server is configured to handle the requests.
|Authentication |Enter the authentication string alias.The Authentication String Alias can be used to identify the correct authentication domain for the user.
|Locale | Enter the locale.
|===
+
In the image above, the placeholder values refer to a configuration file mule-artifact.properties placed in the
`src/main/resources` folder of your project.
You can either enter your credentials into the global configuration properties,
or reference a configuration file that contains these values. For simpler maintenance and better re-usability of your
project, Mule recommends that you use a configuration file. Keeping these values in a separate file is useful if you
need to deploy to different environments, such as production, development, and QA, where your access credentials differ.
+
. Keep the Advanced tab which has Reconnection strategy with their default entries.
. Click Test Connection to confirm that the parameters of your global configuration are accurate, and that Mule is
able to successfully connect to your instance of the BMC Remedy AR System.
. Click OK to save the global connector configurations.
. Your configuration should look like this:
+
image:bmc-remedy-connection-config-properties.png[Remedy use case configuration]


== Use Case: Creating a User in Anypoint Studio

This Mule flow creates a User in the BMC Remedy AR System using the Create operation.

image:bmc-remedy-create-user-flow.png[Creating a User]

. Create a new Mule Project in Anypoint Studio.
. Add the following properties to the mule-artifact.properties file to hold your Remedy credentials and place the properties file in your project's `src/main/resources` directory.
+
[source,code,linenums]
----
config.username=<Username>
config.passowrd=<Password>
config.server=<Server>
config.serverPort=<Server Port>
----
+
. Drag an HTTP Listener component onto the canvas and configure the following parameters:
+
image:bmc-remedy-http-props.png[Remedy HTTP configuration properties]
+
[%header%autowidth.spread]
|===
|Parameter |Value
|Display Name | HTTP
|Extension Configuration | If no HTTP Listener configuration has been created yet, click the plus sign to add a new HTTP Listener Configuration and click OK. Set the Host to localhost and the Port to 8081.
|Path |`/createUser`
|===
+
. Drag Transform Message component next to the HTTP Listener and fill the necessary data.
+
The data mapping should be like this:
+
image:bmc-remedy-transform-message1.png[Remedy DataWeave configuration]
+
. Drag the Remedy Connector Create operation next to the Transform Message component from the Mule Palette.
. Configure the Remedy connector by adding a new Remedy Global Element. Click the plus sign next to the Connector Configuration field.
. Configure the global element according to the table below:
+
[%header%autowidth.spread]
|===
|Parameter |Description | Value
|Name |Enter a name for the configuration to reference it.|<Configuration_Name>
|Username |Enter the Username | `${config.username}`
|Password |Enter the Password | `${config.password}`
|Server |Enter the IP of the AR server responsible for handling login requests. | `${config.server}`
|Server Port | Enter the port number on which the AR server is configured to handle the requests. | `${config.serverPort}`
|===
+
. Your configuration should look like this:
+
image:bmc-remedy-connection-config-properties.png[Remedy use case config]
+
. The corresponding XML configuration should be as follows:
+
[source,xml,linenums]
----
<remedy:config name="Remedy_Configuration" doc:name="Remedy Configuration">
	<remedy:basic-connection 
	username="${config.username}" 
	password="${config.password}" 
	server="${config.server}" 
	serverPort="${config.serverPort}" />
</remedy:config>
----
+
. Click Test Connection to confirm that Mule can connect with the BMC Remedy AR system instance. If the connection is successful, click OK to save the configurations. Otherwise, review or correct any incorrect parameters, then test again.
. Back in the properties editor of the Remedy Create operation, configure the remaining parameters:
+
[%header%autowidth.spread]
|===
|Parameter |Value
|Display Name |Create (or any other name you prefer)
|Extenstion Configuration|Remedy_Configuration - the reference name to the global element you have created.
|Remedy Form Type | User - The form type that you want to create.
|Entry | `#[payload]` 
|===
+
image:bmc-remedy-create-props.png[Remedy use case config]
+
. Add a Logger component after the Create operation to print the ID that is being generated from the Create operation in the Mule Console. Configure the Logger according to the table below.
+
[%header%autowidth.spread]
|===
|Parameter |Value
|Display Name |Logger (or any other name you prefer)
|Message |`#[payload]`
|Level |INFO
|===
+
image:bmc-remedy-logger-props.png[Remedy create logger]
+
. Save and Run the project as a Mule Application. Right-click the project in Package Explorer and click Run As > Mule Application.
. Open a browser and check the response after entering the URL `+http://localhost:8081/createUser+`. You should see the generated ID in the browser and in the Mule console.

== Use Case XML - Creating a User


[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:remedy="http://www.mulesoft.org/schema/mule/remedy"
xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
xmlns:dw="http://www.mulesoft.org/schema/mule/ee/dw" 
xmlns:http="http://www.mulesoft.org/schema/mule/http"
xmlns="http://www.mulesoft.org/schema/mule/core"
xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.mulesoft.org/schema/mule/ee/dw 
http://www.mulesoft.org/schema/mule/ee/dw/current/dw.xsd
http://www.mulesoft.org/schema/mule/http 
http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/core 
http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core 
http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/remedy 
http://www.mulesoft.org/schema/mule/remedy/current/mule-remedy.xsd">

<configuration-properties file="mule-artifact.properties"/>
	<http:listener-config name="HTTP_Listener_config" 
	doc:name="HTTP Listener config" >
		<http:listener-connection host="localhost" port="8081" />
	</http:listener-config>

<remedy:config name="Remedy_Configuration" doc:name="Remedy Configuration">
    <remedy:basic-connection username="${config.username}" 
    password="${config.password}" 
    server="${config.server}" 
    serverPort="${config.serverPort}" />
</remedy:config>
	<flow name="create-user-flow">
        <http:listener config-ref="HTTP_Listener_config" 
        path="/createUser" 
        doc:name="HTTP"/>
		<ee:transform doc:name="Transform Message">
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/java
---
[{
	"2": "Submitter1",
	"7": "Current",
	"8": "Short description1",
	"Login Name": "Mule_soft"
}]]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<remedy:create config-ref="Remedy_Configuration" 
		type="User" 
		doc:name="Create">
        </remedy:create>
        <logger message="#[payload]" level="INFO" doc:name="Logger"/>
    </flow>
</mule>
----

== See Also

* https://docs.bmc.com/docs/display/public/ars81/Installing[BMC Remedy Installation instructions].
* https://communities.bmc.com/docs/DOC-17504[BMC Remedy AR System Java API v8.1 Download].
* https://forums.mulesoft.com[MuleSoft Forum].
* https://support.mulesoft.com[Contact MuleSoft Support].
