= About Error Handling
:keywords: error handling, exceptions, exception catching, exceptions

From a high level perspective, errors that occur in Mule fall into one of two categories: system errors and messaging errors.

== Messaging Errors

Mule throws a messaging error whenever a problem occurs within a flow. This error is known as a link:mule-user-guide/v/4.0/mule-error-concept[Mule Error]. +
These errors are handled by the error handler component. The error handler can enclose link:on-error-scope-concept[On-Error Scopes] that you can implement to handle specific errors in your flow. By default, non handled errors will be logged and propagated.

When a Mule Event being processed through a Mule flow raises an error, normal flow execution stops and the process is transferred to the error handler component. +
Inside the error handler component you can incorporate various On Error scopes designed to match error types and expressions.  Within each on error scope that you configure, you can define an error path incorporating any number of event processors to handle the error precisely as you wish.
The error handler will route errors to the first On Error scope that matches it.

The diagram below illustrates what happens when an event processor throws a Mule error.

image::error-handling-39be7.png[error-handling-39be7.png]

You can override the default error handling behavior per flow, or within a flow, you can group a sequence of components together into a link:try-scope-concept[Try Scope] to further override the flow's error handling behavior.
The default error handler can also be customized by providing a reference to the desired handler in the application configuration.

In the example below, a default payload is set for all unhandled errors:

.Example: XML Configuration for the App
[source,xml,linenums]
----
<configuration defaultErrorHandler-ref="allErrorHandler"/>

<error-handler name="allErrorHandler">
    <on-error-continue>
        <set-payload value="#['An unhandled error occurred: ' ++ error.description]"/>
    </on-error-continue>
</error-handler>
----

Just as you can reference error handlers to specify the default one, error handlers
can be referenced in flows.

In the example below, a flow is setup with an error handler that will log all errors
by using a reference.

.Example: XML Configuration for the App
[source,xml,linenums]
----
<error-handler name="loggingErrorHandler">
    <on-error-continue>
        <logger message="#['Error: ' ++ error.description ++ ', Payload: ' ++ payload]"/>
    </on-error-continue>
</error-handler>

<flow name="withSharedHandler">
    <http:request url="http://example.com"/>
    <error-handler ref="loggingErrorHandler"/>
</flow>
----

== System Errors

Mule throws a system error when an exception occurs at the system level. +
If no Mule Event is involved, the errors are handled by a system error handler.

A system error handler handles exceptions that occur:

* During application start-up.
* When a connection to an external system fails.

When a system error occurs, Mule sends an error notification to registered listeners, logs the error, and if the error was caused by a connection failure, executes a reconnection strategy.

System error handlers are not configurable in Mule.

== See Also

* link:mule-error-concept[About the Mule Error]
* link:on-error-scope-concept[About On-Error Scopes]
* link:try-scope-concept[About Try Scope]
// COMBAK: Review reconnection strategies in Mozart
// * link:reconnection-strategy-about[About Reconnection Strategies]
